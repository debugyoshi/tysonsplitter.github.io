<html>
	<head>
		<style>
			body {
				background-color: black;
			}
			p {
				color: white;
			}
			b {
				color: white;
				float: right;
			}
			input {
				width: 100%;
				color: white;
				background-color: green;
			}
			table, tr, td {
				border: 2px solid white;
				color: white;
				background-color: darkblue;
			}
			table {
				float: left;
			}
		</style>
	</head>
	<body>
		<button type="button" onclick="reloadData()">Input</button>
		<button type="button" onclick="endedRun()">End Run</button>
		<table>
			<tr>
				<th>Opponents</th>
				<th>Active Segment</th>
				<th>Active Split</th>
				<th>Best Segment</th>
				<th>PB Segment</th>
				<th>WR Segment</th>
			</tr>
			<tr>
				<td>Glass Joe</td>
				<td><input id="glass"></td>
				<td><p id="glass_split"></p></td>
				<td><p id="glass_best"></p></td>
				<td><p id="glass_pb"></p></td>
				<td><p id="glass_wr"></p></td>
			</tr>
			<tr>
				<td>Von Kaiser</td>
				<td><input id="von"></td>
				<td><p id="von_split"></p></td>
				<td><p id="von_best"></p></td>
				<td><p id="von_pb"></p></td>
				<td><p id="von_wr"></p></td>
			</tr>
			<tr>
				<td>Piston Honda</td>
				<td><input id="piston"></td>
				<td><p id="piston_split"></p></td>
				<td><p id="piston_best"></p></td>
				<td><p id="piston_pb"></p></td>
				<td><p id="piston_wr"></p></td>
			</tr>
			<tr>
				<td>Don Flamenco</td>
				<td><input id="don"></td>
				<td><p id="don_split"></p></td>
				<td><p id="don_best"></p></td>
				<td><p id="don_pb"></p></td>
				<td><p id="don_wr"></p></td>
			</tr>
			<tr>
				<td>King Hippo</td>
				<td><input id="king"></td>
				<td><p id="king_split"></p></td>
				<td><p id="king_best"></p></td>
				<td><p id="king_pb"></p></td>
				<td><p id="king_wr"></p></td>
			</tr>
			<tr>
				<td>Great Tiger</td>
				<td><input id="great"></td>
				<td><p id="great_split"></p></td>
				<td><p id="great_best"></p></td>
				<td><p id="great_pb"></p></td>
				<td><p id="great_wr"></p></td>
			</tr>
			<tr>
				<td>Bald Bull</td>
				<td><input id="bald"></td>
				<td><p id="bald_split"></p></td>
				<td><p id="bald_best"></p></td>
				<td><p id="bald_pb"></p></td>
				<td><p id="bald_wr"></p></td>
			</tr>
			<tr>
				<td>Piston Honda 2</td>
				<td><input id="piston2"></td>
				<td><p id="piston2_split"></p></td>
				<td><p id="piston2_best"></p></td>
				<td><p id="piston2_pb"></p></td>
				<td><p id="piston2_wr"></p></td>
			</tr>
			<tr>
				<td>Soda Popinski</td>
				<td><input id="soda"></td>
				<td><p id="soda_split"></p></td>
				<td><p id="soda_best"></p></td>
				<td><p id="soda_pb"></p></td>
				<td><p id="soda_wr"></p></td>
			</tr>
			<tr>
				<td>Bald Bull 2</td>
				<td><input id="bald2"></td>
				<td><p id="bald2_split"></p></td>
				<td><p id="bald2_best"></p></td>
				<td><p id="bald2_pb"></p></td>
				<td><p id="bald2_wr"></p></td>
			</tr>
			<tr>
				<td>Don Flamenco 2</td>
				<td><input id="don2"></td>
				<td><p id="don2_split"></p></td>
				<td><p id="don2_best"></p></td>
				<td><p id="don2_pb"></p></td>
				<td><p id="don2_wr"></p></td>
			</tr>
			<tr>
				<td>Mr. Sandman</td>
				<td><input id="sand"></td>
				<td><p id="sand_split"></p></td>
				<td><p id="sand_best"></p></td>
				<td><p id="sand_pb"></p></td>
				<td><p id="sand_wr"></p></td>
			</tr>
			<tr>
			<td>Super Macho Man</td>
				<td><input id="super"></td>
				<td><p id="super_split"></p></td>
				<td><p id="super_best"></p></td>
				<td><p id="super_pb"></p></td>
				<td><p id="super_wr"></p></td>
			</tr>
			<tr>
				<td>Mike Tyson</td>
				<td><input id="mike"></td>
				<td><p id="mike_split"></p></td>
				<td><p id="mike_best"></p></td>
				<td><p id="mike_pb"></p></td>
				<td><p id="mike_wr"></p></td>
			</tr>
		</table>
		<b>Your best time is <span id="personalBest"></span>!</b>
		<b><br>To control:<br>
		<br>Enter your segment time into the active segment beside your opponent and press the "Input"
		<br>button to calculate your splits and add it to the run. Splits will be calculated gradually
		<br>as each segment is added. When your run is complete and you would like to save your run if
		<br>a personal best was acheived, press the "End Run" button. Your PB Segments and best time
		<br>will be updated accordingly.<br>
		<br>If at any time your segment is better than your best segment, clicking the "Input" button
		<br>will update your old best segment with the new best. Please note all saved time and bests
		<br>data is stored in your browser data. Clearing cache will clear any PB data.<br>
		<br>Any improvement suggestions? New world record appeared? Please open an issue on the github
		<br>repository, which you can reach by clicking <a href="https://github.com">here</a>.<br>
		<br>Created by DebugYoshi/StreamCon</b>
		<script>
			window.onload = function() {
				let glassLoadPB = localStorage.getItem("glass_pb");
				let vonLoadPB = localStorage.getItem("von_pb");
				let pistonLoadPB = localStorage.getItem("piston_pb");
				let donLoadPB = localStorage.getItem("don_pb");
				let kingLoadPB = localStorage.getItem("king_pb");
				let greatLoadPB = localStorage.getItem("great_pb");
				let baldLoadPB = localStorage.getItem("bald_pb");
				let piston2LoadPB = localStorage.getItem("piston2_pb");
				let sodaLoadPB = localStorage.getItem("soda_pb");
				let bald2LoadPB = localStorage.getItem("bald2_pb");
				let don2LoadPB = localStorage.getItem("don2_pb");
				let sandLoadPB = localStorage.getItem("sand_pb");
				let superLoadPB = localStorage.getItem("super_pb");
				let mikeLoadPB = localStorage.getItem("mike_pb");

				let glassLoadBest = localStorage.getItem("glass_b");
				let vonLoadBest = localStorage.getItem("von_b");
				let pistonLoadBest = localStorage.getItem("piston_b");
				let donLoadBest = localStorage.getItem("don_b");
				let kingLoadBest = localStorage.getItem("king_b");
				let greatLoadBest = localStorage.getItem("great_b");
				let baldLoadBest = localStorage.getItem("bald_b");
				let piston2LoadBest = localStorage.getItem("piston2_b");
				let sodaLoadBest = localStorage.getItem("soda_b");
				let bald2LoadBest = localStorage.getItem("bald2_b");
				let don2LoadBest = localStorage.getItem("don2_b");
				let sandLoadBest = localStorage.getItem("sand_b");
				let superLoadBest = localStorage.getItem("super_b");
				let mikeLoadBest = localStorage.getItem("mike_b");
				let PB = localStorage.getItem("PB");

				glass_pb.innerHTML = formatTime(glassLoadPB) || "";
				von_pb.innerHTML = formatTime(vonLoadPB) || "";
				piston_pb.innerHTML = formatTime(pistonLoadPB) || "";
				don_pb.innerHTML = formatTime(donLoadPB) || "";
				king_pb.innerHTML = formatTime(kingLoadPB) || "";
				great_pb.innerHTML = formatTime(greatLoadPB) || "";
				bald_pb.innerHTML = formatTime(baldLoadPB) || "";
				piston2_pb.innerHTML = formatTime(piston2LoadPB) || "";
				soda_pb.innerHTML = formatTime(sodaLoadPB) || "";
				bald2_pb.innerHTML = formatTime(bald2LoadPB) || "";
				don2_pb.innerHTML = formatTime(don2LoadPB) || "";
				sand_pb.innerHTML = formatTime(sandLoadPB) || "";
				super_pb.innerHTML = formatTime(superLoadPB) || "";
				mike_pb.innerHTML = formatTime(mikeLoadPB) || "";

				glass_best.innerHTML = formatTime(glassLoadBest) || "99:99.99";
				von_best.innerHTML = formatTime(vonLoadBest) || "99:99.99";
				piston_best.innerHTML = formatTime(pistonLoadBest) || "99:99.99";
				don_best.innerHTML = formatTime(donLoadBest) || "99:99.99";
				king_best.innerHTML = formatTime(kingLoadBest) || "99:99.99";
				great_best.innerHTML = formatTime(greatLoadBest) || "99:99.99";
				bald_best.innerHTML = formatTime(baldLoadBest) || "99:99.99";
				piston2_best.innerHTML = formatTime(piston2LoadBest) || "99:99.99";
				soda_best.innerHTML = formatTime(sodaLoadBest) || "99:99.99";
				bald2_best.innerHTML = formatTime(bald2LoadBest) || "99:99.99";
				don2_best.innerHTML = formatTime(don2LoadBest) || "99:99.99";
				sand_best.innerHTML = formatTime(sandLoadBest) || "99:99.99";
				super_best.innerHTML = formatTime(superLoadBest) || "99:99.99";
				mike_best.innerHTML = formatTime(mikeLoadBest) || "99:99.99";
				
				personalBest.innerHTML = formatTime(PB) || "99:99.99";
			}
		
			function parseTime(timeStr) {
        		if (!timeStr) return 0;
        		let parts = timeStr.split(':');
        		if (parts.length === 2) {
            		return (parseFloat(parts[0]) * 60) + parseFloat(parts[1]);
        		}
        		return parseFloat(parts[0]) || 0;
    		}

    		function formatTime(totalSeconds) {
        		let mins = Math.floor(totalSeconds / 60);
        		let secs = (totalSeconds % 60).toFixed(2);
        		if (mins > 0 && secs < 10) {
            		secs = "0" + secs;
        		}
        		return mins > 0 ? `${mins}:${secs}` : secs;
    		}


			function reloadData() {
				let a = document.getElementById("glass").value || 0;
				let b = document.getElementById("von").value || 0;
				let c = document.getElementById("piston").value || 0;
				let d = document.getElementById("don").value || 0;
				let e = document.getElementById("king").value || 0;
				let f = document.getElementById("great").value || 0;
				let g = document.getElementById("bald").value || 0;
				let h = document.getElementById("piston2").value || 0;
				let i = document.getElementById("soda").value || 0;
				let j = document.getElementById("bald2").value || 0;
				let k = document.getElementById("don2").value || 0;
				let l = document.getElementById("sand").value || 0;
				let m = document.getElementById("super").value || 0;
				let n = document.getElementById("mike").value || 0;

				let besta = document.getElementById("glass_best").innerText || 0;
				let bestb = document.getElementById("von_best").innerText || 0;
				let bestc = document.getElementById("piston_best").innerText || 0;
				let bestd = document.getElementById("don_best").innerText || 0;
				let beste = document.getElementById("king_best").innerText || 0;
				let bestf = document.getElementById("great_best").innerText || 0;
				let bestg = document.getElementById("bald_best").innerText || 0;
				let besth = document.getElementById("piston2_best").innerText || 0;
				let besti = document.getElementById("soda_best").innerText || 0;
				let bestj = document.getElementById("bald2_best").innerText || 0;
				let bestk = document.getElementById("don2_best").innerText || 0;
				let bestl = document.getElementById("sand_best").innerText || 0;
				let bestm = document.getElementById("super_best").innerText || 0;
				let bestn = document.getElementById("mike_best").innerText || 0;


				let g_split = parseTime(a);
				let v_split = g_split + parseTime(b);
				let p_split = v_split + parseTime(c);
				let d_split = p_split + parseTime(d);
				let k_split = d_split + parseTime(e);
				let gr_split = k_split + parseTime(f);
				let bd_split = gr_split + parseTime(g)
				let p2_split = bd_split + parseTime(h);
				let s_split = p2_split + parseTime(i);
				let bd2_split = s_split + parseTime(j);
				let d2_split = bd2_split + parseTime(k);
				let sans_split = d2_split + parseTime(l);
				let m_split = sans_split + parseTime(m);
				let tyson_split = m_split + parseTime(n);

				let v_active = parseTime(b);
				let p_active = parseTime(c);
				let d_active = parseTime(d);
				let k_active = parseTime(e);
				let gr_active = parseTime(f);
				let bd_active = parseTime(g);
				let p2_active = parseTime(h);
				let s_active = parseTime(i);
				let bd2_active = parseTime(j);
				let d2_active = parseTime(k);
				let sans_active = parseTime(l);
				let m_active = parseTime(m);
				let tyson_active = parseTime(n);

				let g_best = parseTime(besta);
				let v_best = parseTime(bestb);
				let p_best = parseTime(bestc);
				let d_best = parseTime(bestd);
				let k_best = parseTime(beste);
				let gr_best = parseTime(bestf);
				let bd_best = parseTime(bestg)
				let p2_best = parseTime(besth);
				let s_best = parseTime(besti);
				let bd2_best = parseTime(bestj);
				let d2_best = parseTime(bestk);
				let sans_best = parseTime(bestl);
				let m_best = parseTime(bestm);
				let tyson_best = parseTime(bestn);


				if ((g_split < g_best && g_split !== null)|| g_best === 0) {
					let g_new = g_split;
					console.log(g_new);
					glass_best.innerHTML = formatTime(g_new);
					localStorage.setItem("glass_b", g_new);
				}
				if ((v_active < v_best && v_active !== null) || v_best === 0) {
					let v_new = v_active;
					console.log(v_new)
					von_best.innerHTML = formatTime(v_new);
					localStorage.setItem("von_b", v_new);
				}
				if ((p_active < p_best && p_active !== null) || p_best === 0) {
					let p_new = p_active;
					piston_best.innerHTML = formatTime(p_new);
					localStorage.setItem("piston_b", p_new);
				}
				if ((d_active < d_best && d_active !== null) || d_best === 0) {
					let d_new = d_active;
					don_best.innerHTML = formatTime(d_new);
					localStorage.setItem("don_b", d_new);
				}
				if ((k_active < k_best && k_active !== null) || k_best === 0) {
					let k_new = k_active;
					king_best.innerHTML = formatTime(k_new);
					localStorage.setItem("king_b", k_new);
				}
				if ((gr_active < gr_best && gr_active !== null) || gr_best === 0) {
					let gr_new = gr_active;
					great_best.innerHTML = formatTime(gr_new);
					localStorage.setItem("great_b", gr_new);
				}
				if ((bd_active < bd_best && bd_active !== null) || bd_best === 0) {
					let bd_new = bd_active;
					bald_best.innerHTML = formatTime(bd_new);
					localStorage.setItem("bald_b", bd_new);
				}
				if ((p2_active < p2_best && p2_active !== null) || p2_best === 0) {
					let p2_new = p2_active;
					piston2_best.innerHTML = formatTime(p2_new);
					localStorage.setItem("piston2_b", p2_new);
				}
				if ((s_active < s_best && s_active !== null) || s_best === 0) {
					let s_new = s_active;
					soda_best.innerHTML = formatTime(s_new);
					localStorage.setItem("soda_b", s_new);
				}
				if ((bd2_active < bd2_best && bd2_active !== null) || bd2_best === 0) {
					let bd2_new = bd2_active;
					bald2_best.innerHTML = formatTime(bd2_new);
					localStorage.setItem("bald2_b", bd2_new);
				}
				if ((d2_active < d2_best && d2_active !== null) || d2_best === 0) {
					let d2_new = d2_active;
					don2_best.innerHTML = formatTime(d2_new);
					localStorage.setItem("don2_b", d2_new);
				}
				if ((sans_active < sans_best && sans_active !== null) || sans_best === 0) {
					let sans_new = sans_active;
					sand_best.innerHTML = formatTime(sans_new);
					localStorage.setItem("sand_b", sans_new);
				}
				if ((m_active < m_best && m_active !== null) || m_best === 0) {
					let m_new = m_active;
					super_best.innerHTML = formatTime(m_new);
					localStorage.setItem("super_b", m_new);
				}
				if ((tyson_active < tyson_best && tyson_active !== null) || tyson_best === 0) {
					let tyson_new = tyson_active;
					mike_best.innerHTML = formatTime(tyson_new);
					localStorage.setItem("mike_b", tyson_new);
				}


				
				glass_split.innerHTML = formatTime(g_split) || "";
				von_split.innerHTML = formatTime(v_split) || "";
				piston_split.innerHTML = formatTime(p_split) || "";
				don_split.innerHTML = formatTime(d_split) || "";
				king_split.innerHTML = formatTime(k_split) || "";
				great_split.innerHTML = formatTime(gr_split) || "";
				bald_split.innerHTML = formatTime(bd_split) || "";
				piston2_split.innerHTML = formatTime(p2_split) || "";
				soda_split.innerHTML = formatTime(s_split) || "";
				bald2_split.innerHTML = formatTime(bd2_split) || "";
				don2_split.innerHTML = formatTime(d2_split) || "";
				sand_split.innerHTML = formatTime(sans_split) || "";
				super_split.innerHTML = formatTime(m_split) || "";
				mike_split.innerHTML = formatTime(tyson_split) || "";
			}

			function endedRun() {
				let checkTime = document.getElementById("mike_split").innerText || 0;
				let finalTime = parseTime(checkTime);
				let PB = document.getElementById("personalBest").innerText || "99:99.99";
				console.log(finalTime);
				let bestTime = parseTime(PB);
				console.log(bestTime);
				if (finalTime < bestTime || bestTime === 0) {
					let checka = document.getElementById("glass").value || 0;
					let checkb = document.getElementById("von").value || 0;
					let checkc = document.getElementById("piston").value || 0;
					let checkd = document.getElementById("don").value || 0;
					let checke = document.getElementById("king").value || 0;
					let checkf = document.getElementById("great").value || 0;
					let checkg = document.getElementById("bald").value || 0;
					let checkh = document.getElementById("piston2").value || 0;
					let checki = document.getElementById("soda").value || 0;
					let checkj = document.getElementById("bald2").value || 0;
					let checkk = document.getElementById("don2").value || 0;
					let checkl = document.getElementById("sand").value || 0;
					let checkm = document.getElementById("super").value || 0;
					let checkn = document.getElementById("mike").value || 0;
					

					localStorage.setItem("glass_pb", checka);
					localStorage.setItem("von_pb", checkb);
					localStorage.setItem("piston_pb", checkc);
					localStorage.setItem("don_pb", checkd);
					localStorage.setItem("king_pb", checke);
					localStorage.setItem("great_pb", checkf);
					localStorage.setItem("bald_pb", checkg);
					localStorage.setItem("piston2_pb", checkh);
					localStorage.setItem("soda_pb", checki);
					localStorage.setItem("bald2_pb", checkj);
					localStorage.setItem("don2_pb", checkk);
					localStorage.setItem("sand_pb", checkl);
					localStorage.setItem("super_pb", checkm);
					localStorage.setItem("mike_pb", checkn);
					

					glass_pb.innerHTML = formatTime(checka) || "";
					von_pb.innerHTML = formatTime(checkb) || "";
					piston_pb.innerHTML = formatTime(checkc) || "";
					don_pb.innerHTML = formatTime(checkd) || "";
					king_pb.innerHTML = formatTime(checke) || "";
					great_pb.innerHTML = formatTime(checkf) || "";
					bald_pb.innerHTML = formatTime(checkg) || "";
					piston2_pb.innerHTML = formatTime(checkh) || "";
					soda_pb.innerHTML = formatTime(checki) || "";
					bald2_pb.innerHTML = formatTime(checkj) || "";
					don2_pb.innerHTML = formatTime(checkk) || "";
					sand_pb.innerHTML = formatTime(checkl) || "";
					super_pb.innerHTML = formatTime(checkm) || "";
					mike_pb.innerHTML = formatTime(checkn) || "";

					let PB = finalTime;
					localStorage.setItem("PB", PB);

				}
			}
		</script>
	</body>
</html>